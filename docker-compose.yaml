services:
  redis:
    image: redis:7-alpine
    restart: always
    ports:
      - "6379:6379"
  livekit-server:
    image: livekit/livekit-server:latest
    restart: always
    depends_on:
      - redis
    ports:
      - "7880:7880"
      - "7881:7881"
      - "50000-51000:50000-51000/udp"
    volumes:
      - ./config.yaml:/livekit-server.yaml:ro
    command: ["--config", "/livekit-server.yaml"]
  sip-server:
    image: livekit/sip:latest
    ports:
      - "5060:5060/udp"
      - "5060:5060/tcp"
      - "10000-11000:10000-11000/udp"
    volumes:
      - ./sip-config.yaml:/sip/config.yaml
    depends_on:
      - redis